<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <title>Steam Library</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #1b2838;
      color: #fff;
      display: flex;
      height: 100vh;
    }

    aside {
      width: 250px;
      background-color: #171a21;
      padding: 20px;
      overflow-y: auto;
    }

    aside h2 {
      color: #66c0f4;
      margin-top: 0;
    }

    .game-list a {
      display: block;
      color: #c6d4df;
      text-decoration: none;
      padding: 10px 0;
      border-bottom: 1px solid #2a475e;
    }

    .game-list a:hover {
      color: #1a9fff;
    }

    main {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      background-color: #1b2838;
    }

    .game-details img {
      width: 100%;
      max-width: 500px;
      border-radius: 8px;
    }

    .game-details h1 {
      margin-top: 20px;
      color: #66c0f4;
    }

    .user-info {
      margin-bottom: 20px;
      color: #3ecf8e;
    }

    .user-info a {
      color: #ffb400;
      text-decoration: none;
      margin-left: 10px;
    }
  </style>
</head>
<body>

<aside>
  <h2>라이브러리</h2>
  <div class="game-list">
    <a th:each="game : ${games}" th:href="@{/library/{memberId}/{selectedGameId}(memberId=${game.id}, selectedGameId=${game.id})}" th:text="${game.name}">게임 이름</a>
  </div>
</aside>

<main>
  <div class="user-info">
    <span th:text="${#authentication.name}">사용자</span>
    <a href="/mypage">마이페이지</a>
    <a href="/logout">로그아웃</a>
  </div>

  <!-- games가 비어있을 경우 -->
  <div th:if="${#lists.isEmpty(games)}">
    <p>아직 게임이 없습니다. 게임을 추가하세요.</p>
  </div>

  <!-- games가 있고, selectedGame이 있을 경우 -->
  <div class="game-details" th:if="${!#lists.isEmpty(games)} and ${selectedGame != null}">
    <img th:if="${selectedGame.imageUrl != null}"
         th:src="@{${selectedGame.imageUrl}}"
         alt="Game Image"
         style="max-width: 500px; width: 100%; border-radius: 8px;">
    <img th:unless="${selectedGame.imageUrl != null}"
         th:src="@{/images/game-placeholder.png}"
         alt="Game Placeholder"
         style="max-width: 500px; width: 100%; border-radius: 8px;">
    <h1 th:text="${selectedGame.name}">게임 이름</h1>
  </div>

  <!-- games가 있고, selectedGame이 없을 경우 -->
  <div th:if="${!#lists.isEmpty(games)} and ${selectedGame == null}">
    <p>왼쪽에서 게임을 선택하세요.</p>
  </div>
</main>

</body>
</html>