<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title th:text="${game.name}">게임 상세</title>
    <link rel="stylesheet" th:href="@{/css/game.css}">
</head>
<body>

<div class="container">
    <!-- 게임 헤더 -->
    <div class="game-header">
        <img th:src="${game.imageUrl}" alt="게임 이미지" class="game-image"/>
        <div class="game-info">
            <h1 th:text="${game.name}">게임 이름</h1>
            <p th:text="${game.description}">게임 설명</p>
            <p><strong>장르:</strong> <span th:text="${game.genre}">액션</span></p>
            <p><strong>평점:</strong> <span th:text="${game.rate}">4.8</span>/5</p>
        </div>
    </div>

    <!-- 가격 및 할인 -->
    <div class="purchase-section">
        <div class="price-box">
            <span th:if="${game.discount != null and game.discount.valid}" class="original-price" th:text="${#numbers.formatDecimal(game.price, 0, 'COMMA')} + '원'"></span>
            <span class="discounted-price" th:text="${#numbers.formatDecimal(game.applyDiscount(), 0, 'COMMA')} + '원'"></span>
            <span th:if="${game.discount != null and game.discount.valid}" class="discount-rate" th:text="'-' + ${game.discount.discountRate} + '%'"></span>
        </div>

        <!-- 로그인 상태별 구매 버튼 -->
        <div class="purchase-button">
            <form th:action="@{/purchase}" method="post" th:if="${#authentication.principal?.username != null}">
                <input type="hidden" th:name="productId" th:value="${game.id}" />
                <button type="submit">장바구니에 담기</button>
            </form>
            <a th:if="${#authentication.principal?.username == null}" th:href="@{/login}" class="login-link">
                로그인 후 구매하기
            </a>
        </div>
    </div>
</div>

</body>
</html>