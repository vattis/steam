<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <title>Steam 네비게이션 바</title>
</head>
<body>

<!-- ✅ Fragment 정의 -->
<!-- fragments/navbar.html -->
<div class="navbar">
  <div>
    <a th:href="@{/shop/product}">상점</a>
    <a th:href="@{/categories}">카테고리</a>
    <a th:href="@{/top-sellers}">인기 게임</a>
    <a th:href="@{/new-releases}">신규 출시</a>
  </div>
  <div>
    <a th:href="@{/login}">로그인</a>
    <a th:href="@{/signup}">회원가입</a>
  </div>
</div>
<div th:fragment="navbar(currentUser)" style="display: flex; align-items: center; background-color: #171a21; padding: 20px;">

  <!-- 왼쪽: 로고 -->
  <div style="flex-shrink: 0;">
    <a href="/" style="text-decoration: none;">
      <h1 style="margin: 0; color: #66c0f4;">Steam</h1>
    </a>
  </div>

  <!-- 오른쪽: 메뉴 -->
  <nav style="display: flex; align-items: center; margin-left: auto;">

    <a href="/shop/product" style="color: #c6d4df; margin-left: 20px; text-decoration: none;">상점</a>

    <!-- currentUser가 null이 아닐 때만 라이브러리 링크 출력 -->
    <a th:if="${currentUser != null}"
       th:href="@{/library/{memberId}(memberId=${currentUser.id})}"
       style="color: #c6d4df; margin-left: 20px; text-decoration: none;">라이브러리</a>

    <a href="/galleries" style="color: #c6d4df; margin-left: 20px; text-decoration: none;">커뮤니티</a>
    <a href="#" style="color: #c6d4df; margin-left: 20px; text-decoration: none;">지원</a>

    <!-- 로그인 여부에 따라 다른 버튼 표시 -->
    <span sec:authorize="isAnonymous()">
      <a href="/login" style="margin-left: 40px; color: #3ecf8e; font-weight: bold;">로그인</a>
    </span>

    <span sec:authorize="isAuthenticated()">
      <a th:href="@{/profile/{memberId}(memberId=${currentUser.id}, commentPageNum=0)}"
         style="margin-left: 40px; color: #3ecf8e; font-weight: bold;"
         th:text="${currentUser.nickName}">프로필</a>
      <a href="/log-out" style="margin-left: 20px; color: #ff6961; font-weight: bold; text-decoration: none;">로그아웃</a>
    </span>

  </nav>
</div>
</body>
</html>
